# Snakemake workflow for performing several population genomic comparisons of population replicates across two different
# habitat categories and two different time periods. These units however can be changed to any categorical variable with
# two different types.

report: "report/workflow.rst"

include: "rules/common.smk"

include: "rules/ref.smk"
include: "rules/preprocessing.smk"
include: "rules/qc.smk"
include: "rules/mapping.smk"
include: "rules/angsd.smk"

def all_input(wildcards):
    """
    Function defining all requested inputs for the all rule below.
    """
    #wanted_input = expand([results+"/angsd/glf/{sample}_mem.glf.gz", results+"/endorspy/{sample}_mem_endogenous_dna_mqc.json", results+"/qualimap/{sample}_mem_dedup/genome_results.txt"], sample=samples.index)
    wanted_input = expand([results+"/angsd/sfs/{sample}_fold1.sfs", results+"/angsd/sfs/{sample}_fold1.bootsfs", results+"/qualimap/{sample}_mem_dedup/genome_results.txt", results+"/endorspy/{sample}_mem_endogenous_dna_mqc.json"], sample=samples.index)
    return wanted_input


# master target rule
rule all:
    input: all_input